/*!
  * bean.js - copyright Jacob Thornton 2011
  * https://github.com/fat/bean
  * MIT License
  * special thanks to:
  * dean edwards: http://dean.edwards.name/
  * dperini: https://github.com/dperini/nwevents
  * the entire mootools team: github.com/mootools/mootools-core
  */
!function(a,b){function G(a){var b=a.relatedTarget;return b?b!=this&&b.prefix!="xul"&&!/document/.test(this.toString())&&!q(this,b):b===null}var c=1,d={},e={},f=/over|out/,g=/[^\.]*(?=\..*)\.|.*/,h=/\..*/,i="addEventListener",j="attachEvent",k="removeEventListener",l="detachEvent",m=b||{},n=m.documentElement||{},o=n[i],p=o?i:j,q=function(a,b){var c=b.parentNode;while(c!==null){if(c==a)return!0;c=c.parentNode}},r=function(a,b){return a.__uid=b||a.__uid||c++},s=function(a){var b=r(a);return d[b]=d[b]||{}},t=o?function(a,b,c,d){a[d?i:k](b,c,!1)}:function(a,b,c,d,e){e&&d&&(a["_on"+e]=a["_on"+e]||0),a[d?j:l]("on"+b,c)},u=function(b,c,d){return function(e){e=E(e||((this.ownerDocument||this.document||this).parentWindow||a).event);return c.apply(b,[e].concat(d))}},v=function(a,b,c,d,e){return function(f){(d?d.apply(this,arguments):o?!0:f&&f.propertyName=="_on"+c||!f)&&b.apply(a,Array.prototype.slice.call(arguments,f?0:1).concat(e))}},w=function(a,b,c,d){var f=b.replace(h,""),i=s(a),j=i[f]||(i[f]={}),k=c,l=r(c,b.replace(g,""));if(j[l])return a;var m=H[f];m&&(c=m.condition?v(a,c,f,m.condition):c,f=m.base||f);var n=F[f];c=n?u(a,c,d):v(a,c,f,!1,d),n=o||n;if(f=="unload"){var q=c;c=function(){x(a,f,c)&&q()}}a[p]&&t(a,n?f:"propertychange",c,!0,!n&&f),j[l]=c,c.__uid=l,c.__originalFn=k;return f=="unload"?a:e[r(a)]=a},x=function(a,b,c){var d,e,f,i,j=s(a),k=b.replace(h,"");if(!j||!j[k])return a;e=b.replace(g,""),f=e?e.split("."):[c.__uid];for(i=f.length;i--;){d=f[i],c=j[k][d],delete j[k][d];if(a[p]){k=H[k]?H[k].base:k;var l=o||F[k];t(a,l?k:"propertychange",c,!1,!l&&k)}}return a},y=function(a,b,c){return function(d){var e=typeof a=="string"?c(a,this):a;for(var f=d.target;f&&f!=this;f=f.parentNode)for(var g=e.length;g--;)if(e[g]==f)return b.apply(f,arguments)}},z=function(a,b,c,d,e){if(typeof b=="object"&&!c)for(var f in b)b.hasOwnProperty(f)&&z(a,f,b[f]);else{var g=typeof c=="string",h=(g?c:b).split(" ");c=g?y(b,d,e):c;for(var i=h.length;i--;)w(a,h[i],c,Array.prototype.slice.call(arguments,g?4:3))}return a},A=function(a,b,c){var d,e,f,i,j=typeof b=="string",k=j&&b.replace(g,""),l=x,m=s(a);if(j&&/\s/.test(b)){b=b.split(" "),i=b.length-1;while(A(a,b[i])&&i--);return a}f=j?b.replace(h,""):b;if(!m||j&&!m[f]){if(m&&k)for(d in m)if(m.hasOwnProperty(d))for(i in m[d])m[d].hasOwnProperty(i)&&i===k&&l(a,[d,k].join("."));return a}if(typeof c=="function")l(a,f,c);else if(k)l(a,b);else{l=f?l:A,e=j&&f,f=f?c||m[f]||f:m;for(d in f)f.hasOwnProperty(d)&&(l(a,e||d,f[d]),delete f[d])}return a},B=function(a,b,c){var d,e,f,i=b.split(" ");for(f=i.length;f--;){b=i[f].replace(h,"");var j=F[b],k=i[f].replace(g,""),l=s(a)[b];if(k){k=k.split(".");for(e=k.length;e--;)l&&l[k[e]]&&l[k[e]].apply(a,[!1].concat(c))}else if(!c&&a[p])C(j,b,a);else for(e in l)l.hasOwnProperty(e)&&l[e].apply(a,[!1].concat(c))}return a},C=o?function(c,d,e){evt=b.createEvent(c?"HTMLEvents":"UIEvents"),evt[c?"initEvent":"initUIEvent"](d,!0,!0,a,1),e.dispatchEvent(evt)}:function(a,c,d){a?d.fireEvent("on"+c,b.createEventObject()):d["_on"+c]++},D=function(a,b,c){var d=s(b),e,f,g=r(a);e=c?d[c]:d;for(f in e)e.hasOwnProperty(f)&&(c?z:D)(a,c||b,c?e[f].__originalFn:f);return a},E=function(a){var c={};if(!a)return c;var d=a.type,e=a.target||a.srcElement;c.preventDefault=E.preventDefault(a),c.stopPropagation=E.stopPropagation(a),c.target=e&&e.nodeType==3?e.parentNode:e;if(~d.indexOf("key"))c.keyCode=a.which||a.keyCode;else if(/click|mouse|menu/i.test(d)){c.rightClick=a.which==3||a.button==2,c.pos={x:0,y:0};if(a.pageX||a.pageY)c.clientX=a.pageX,c.clientY=a.pageY;else if(a.clientX||a.clientY)c.clientX=a.clientX+b.body.scrollLeft+b.documentElement.scrollLeft,c.clientY=a.clientY+b.body.scrollTop+b.documentElement.scrollTop;f.test(d)&&(c.relatedTarget=a.relatedTarget||a[(d=="mouseover"?"from":"to")+"Element"])}for(var g in a)g in c||(c[g]=a[g]);return c};E.preventDefault=function(a){return function(){a.preventDefault?a.preventDefault():a.returnValue=!1}},E.stopPropagation=function(a){return function(){a.stopPropagation?a.stopPropagation():a.cancelBubble=!0}};var F={click:1,dblclick:1,mouseup:1,mousedown:1,contextmenu:1,mousewheel:1,DOMMouseScroll:1,mouseover:1,mouseout:1,mousemove:1,selectstart:1,selectend:1,keydown:1,keypress:1,keyup:1,orientationchange:1,touchstart:1,touchmove:1,touchend:1,touchcancel:1,gesturestart:1,gesturechange:1,gestureend:1,focus:1,blur:1,change:1,reset:1,select:1,submit:1,load:1,unload:1,beforeunload:1,resize:1,move:1,DOMContentLoaded:1,readystatechange:1,error:1,abort:1,scroll:1},H={mouseenter:{base:"mouseover",condition:G},mouseleave:{base:"mouseout",condition:G},mousewheel:{base:/Firefox/.test(navigator.userAgent)?"DOMMouseScroll":"mousewheel"}},I={add:z,remove:A,clone:D,fire:B},J=function(a){var b=A(a).__uid;b&&(delete e[b],delete d[b])};a[j]&&z(a,"unload",function(){for(var b in e)e.hasOwnProperty(b)&&J(e[b]);a.CollectGarbage&&CollectGarbage()});var K=a.bean;I.noConflict=function(){a.bean=K;return this},typeof module!="undefined"&&module.exports?module.exports=I:a.bean=I}(this,document)